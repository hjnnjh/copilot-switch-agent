{
  "timestamp": "2025-12-11T16:23:46+0800",
  "project": "copilot-switch",
  "root_docs": {
    "path": "CLAUDE.md"
  },
  "modules": [
    {
      "name": "scripts",
      "path": "scripts",
      "docs": "scripts/CLAUDE.md",
      "responsibility": "安装/卸载 macOS LaunchAgent 以运行 copilot-api，生成配置与 CLI 链接",
      "entries": [
        "scripts/install_copilot_agent.sh",
        "scripts/uninstall_copilot_agent.sh"
      ],
      "interfaces": [
        "安装脚本参数 --dir/--account/--label/--log-dir",
        "卸载脚本参数 --label/--plist/--config/--log-dir 及清理开关",
        "生成 LaunchAgent plist、config、日志、copilotctl 链接"
      ],
      "important_paths": {
        "config": "config/copilot-switch.conf (运行时生成)",
        "launch_agent": "~/Library/LaunchAgents/<label>.plist",
        "logs": "~/Library/Logs/<label>.out.log / <label>.err.log",
        "cli_link": "~/bin/copilotctl"
      },
      "tests": [],
      "data_models": [
        {
          "name": "copilot-switch.conf",
          "format": "key=value",
          "fields": ["default_install_dir", "default_account_type", "known_install_dirs", "log_dir", "label"]
        }
      ],
      "coverage": {
        "files_scanned": 2,
        "files_total": 2,
        "status": "complete"
      }
    },
    {
      "name": "templates",
      "path": "templates",
      "docs": "templates/CLAUDE.md",
      "responsibility": "LaunchAgent plist 模板渲染 (启动命令、环境变量、日志路径)",
      "entries": [
        "templates/com.zephyrus.copilot-api.plist.tmpl"
      ],
      "interfaces": [
        "占位符 __LABEL__/__INSTALL_DIR__/__ACCOUNT_TYPE__/__PATH_ENV__/__LOG_OUT__/__LOG_ERR__"
      ],
      "important_paths": {
        "render_output": "~/Library/LaunchAgents/<label>.plist"
      },
      "tests": [],
      "data_models": [],
      "coverage": {
        "files_scanned": 1,
        "files_total": 1,
        "status": "complete"
      }
    },
    {
      "name": "bin",
      "path": "bin",
      "docs": null,
      "responsibility": "CLI 工具 copilotctl（二进制文件，管理服务生命周期）",
      "entries": [
        "bin/copilotctl"
      ],
      "interfaces": [
        "start/stop/restart/status - 服务生命周期管理",
        "switch --account/--dir - 切换账户类型或安装目录",
        "login - GitHub 认证",
        "check-usage - 查看 Copilot 使用量",
        "logs - 查看日志",
        "list/config - 配置管理",
        "heal - 健康检查"
      ],
      "important_paths": {
        "cli_binary": "bin/copilotctl",
        "cli_link": "~/bin/copilotctl"
      },
      "tests": [],
      "data_models": [],
      "coverage": {
        "files_scanned": 0,
        "files_total": 1,
        "status": "skipped",
        "reason": "二进制文件，不读取内容"
      }
    }
  ],
  "coverage": {
    "files_total_estimated": 10,
    "files_scanned": 7,
    "coverage_ratio": 0.70,
    "truncated": false,
    "details": {
      "source_files": {
        "scanned": ["scripts/install_copilot_agent.sh", "scripts/uninstall_copilot_agent.sh", "templates/com.zephyrus.copilot-api.plist.tmpl"],
        "total": 3
      },
      "documentation": {
        "scanned": ["CLAUDE.md", "README.md", "scripts/CLAUDE.md", "templates/CLAUDE.md"],
        "total": 4
      },
      "config_files": {
        "scanned": [".gitignore", ".serena/project.yml"],
        "total": 2
      }
    }
  },
  "ignored": {
    "patterns": [
      ".git/**",
      "node_modules/**",
      "*.log",
      "*.lock",
      ".DS_Store",
      ".spec-workflow/archive/**",
      "config/copilot-switch.conf"
    ],
    "skipped": [
      {
        "path": "bin/copilotctl",
        "reason": "二进制文件，未读取内容"
      },
      {
        "path": ".spec-workflow/templates/**",
        "reason": "项目外部模板，与核心功能无关"
      },
      {
        "path": ".spec-workflow/user-templates/**",
        "reason": "用户模板目录，与核心功能无关"
      }
    ]
  },
  "gaps": [],
  "next_steps": []
}
